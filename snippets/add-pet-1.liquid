<div class="wrap" style="position: relative; z-index: 9;">
  <div class="modal">
    <div class="container">
      <div class="my-pet-1 rel" id="addPet1">
        <span class="close-pet" data-form="addPet1">{% include 'icon-close-new' %}</span>
        <h2 class="tk-le-monde-livre-classic-byol text-center">{{ 'customer.pet_details.add_pet' | t }}</h2>
        
        <form action="/a/custmeta" method="POST" id="custmeta">
          <div class="my-pet-form">

            <input type="hidden" name="customer[id]" value="{{ customer.id }}" />
            <div class="row">
              <div class="column">
                <label class="my-pet-info">{{ 'customer.pet_details.pet_name' | t }}</label>
                <input type="text" name="metafield[customer.pet_name]" value="" placeholder="{{ 'customer.pet_details.pet_name' | t }}" />
              </div>
              <div class="column">
                <label class="my-pet-info">{{ 'customer.pet_details.pet_dob' | t }}</label>
                <input type="date" name="metafield[customer.pet_dob]" value="" placeholder="{{ 'customer.pet_details.pet_dob' | t }}" />
              </div>
            </div>

            <div class="row">
              <div class="column">
                <label class="my-pet-info">{{ 'customer.pet_details.pet_type' | t }}</label>
                <div class="pet-type pet-dog selected">
                  <input type="radio" name="metafield[customer.pet_type]" checked="checked" class="pet-type-radio" id="{{ 'customer.pet_details.pet_dog' | t }}">
                  <label class="" for="{{ 'customer.pet_details.pet_dog' | t }}">{{ 'customer.pet_details.pet_dog' | t }}</label>
                </div>
                <div class="pet-type pet-cat">
                  <input type="radio" name="metafield[customer.pet_type]" class="pet-type-radio" id="{{ 'customer.pet_details.pet_cat' | t }}">
                  <label class="" for="{{ 'customer.pet_details.pet_cat' | t }}">{{ 'customer.pet_details.pet_cat' | t }}</label>
                </div>
              </div>
              <div class="column">
                <label class="my-pet-info">{{ 'customer.pet_details.pet_gender' | t }}</label>
                <div class="pet-gender-info pet-male selected">
                  <input type="radio" name="metafield[customer.pet_gender]" checked="checked" class="pet-gender-radio" id="{{ 'customer.pet_details.pet_male' | t }}">
                  <label class="" for="{{ 'customer.pet_details.pet_male' | t }}">{{ 'customer.pet_details.pet_male' | t }}</label>
                </div>
                <div class="pet-gender-info pet-female">
                  <input type="radio" name="metafield[customer.pet_gender]" class="pet-gender-radio" id="{{ 'customer.pet_details.pet_female' | t }}">
                  <label class="" for="{{ 'customer.pet_details.pet_female' | t }}">{{ 'customer.pet_details.pet_female' | t }}</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="column">
                <label class="my-pet-info">{{ 'customer.pet_details.pet_activity' | t }}</label>
                {% for block in section.blocks %}
                  {% if block.type == "pet-activity" %}

                    {% if block.settings.pet_activity1 != blank %}
                    <div class="pet-activity pet-{{ block.settings.pet_activity1 }} selected">
                      <input type="radio" name="metafield[customer.pet_activity]" checked="checked" class="pet-activity-radio" id="{{ block.settings.pet_activity1 }}">
                      <label class="" for="{{ block.settings.pet_activity1 }}">{{ block.settings.pet_activity1 }}</label>
                    </div>
                    {% endif %}

                    {% if block.settings.pet_activity2 != blank %}
                    <div class="pet-activity pet-{{ block.settings.pet_activity2 }}">
                      <input type="radio" name="metafield[customer.pet_activity]" class="pet-activity-radio" id="{{ block.settings.pet_activity2 }}">
                      <label class="" for="{{ block.settings.pet_activity2 }}">{{ block.settings.pet_activity2 }}</label>
                    </div>
                    {% endif %}

                    {% if block.settings.pet_activity3 != blank %}
                    <div class="pet-activity pet-{{ block.settings.pet_activity3 }}">
                      <input type="radio" name="metafield[customer.pet_activity]" class="pet-activity-radio" id="{{ block.settings.pet_activity3 }}">
                      <label class="" for="{{ block.settings.pet_activity3 }}">{{ block.settings.pet_activity3 }}</label>
                    </div>
                    {% endif %}

                    {% if block.settings.pet_activity4 != blank %}
                    <div class="pet-activity pet-{{ block.settings.pet_activity4 }}">
                      <input type="radio" name="metafield[customer.pet_activity]" class="pet-activity-radio" id="{{ block.settings.pet_activity4 }}">
                      <label class="" for="{{ block.settings.pet_activity4 }}">{{ block.settings.pet_activity4 }}</label>
                    </div>
                    {% endif %}

                    {% if block.settings.pet_activity5 != blank %}
                    <div class="pet-activity pet-{{ block.settings.pet_activity5 }}">
                      <input type="radio" name="metafield[customer.pet_activity]" class="pet-activity-radio" id="{{ block.settings.pet_activity5 }}">
                      <label class="" for="{{ block.settings.pet_activity5 }}">{{ block.settings.pet_activity5 }}</label>
                    </div>
                    {% endif %}

                  {% endif %}
                {% endfor %}
              </div>
              <div class="column">
                <label class="my-pet-info">{{ 'customer.pet_details.pet_neutered' | t }}</label>
                <div class="pet-neutered pet-neutered-yes selected">
                  <input type="radio" name="metafield[customer.pet_neutered]" checked="checked" class="pet-neutered-radio" id="{{ 'customer.pet_details.pet_neutered_yes' | t }}">
                  <label class="" for="{{ 'customer.pet_details.pet_neutered_yes' | t }}">{{ 'customer.pet_details.pet_neutered_yes' | t }}</label>
                </div>
                <div class="pet-neutered pet-neutered-no">
                  <input type="radio" name="metafield[customer.pet_neutered]" class="pet-neutered-radio" id="{{ 'customer.pet_details.pet_neutered_no' | t }}">
                  <label class="" for="{{ 'customer.pet_details.pet_neutered_no' | t }}">{{ 'customer.pet_details.pet_neutered_no' | t }}</label>
                </div>
              </div>
            </div>
          </div>
            
          <div class="flex-box justify-between align-center" style="margin-top: 8px;">
            <span class="cancel-edit" data-form="addPet1">{{ 'customer.addresses.cancel' | t }}</span>
            <button type="submit" class="btn pet-btn">{{ 'customer.pet_details.add_pet' | t }}</button>
          </div>
          
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  
  $(document).ready(function() {
    $(".pet-type").click(function() {
      $(".pet-type").removeClass("selected");
      $(this).addClass("selected");
    });
    
    $(".pet-gender-info").click(function() {
      $(".pet-gender-info").removeClass("selected");
      $(this).addClass("selected");
    });
    
    $(".pet-neutered").click(function() {
      $(".pet-neutered").removeClass("selected");
      $(this).addClass("selected");
    });
  });
  
  $('form#custmeta').submit(function(e) {
    e.preventDefault();
    $.ajax({
      type: "POST",
      dataType: "json",
      data: $(this).serialize(),
      url: $(this).attr('action'),
      success: function (data) {
        var formValid = (data.status === 'OK');
        if (formValid) {
          var msgs = '';
          for (var i=0;i<data.messages.length;i++) {
            msgs += '-- ' + data.messages[i] + '\n';
          }
          if (msgs > '') {
            alert('SUCCESS WITH MESSAGES:\n\n' + msgs);
          }
          else {
            alert('SUCCESS!');
          }
        }
        else {
          alert('Status: ' + data.status + '\nMessage: ' + data.message);
        }
      },
      error: function (jqXHR, textStatus, errorThrown) {
        alert('AJAX or Server 500 error occurred');
      }
    });
    return false;
  });
</script>